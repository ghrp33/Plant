
<div class="container">
  <div class='row py-5'>
    <div class='col-9'>
      <h1>All Plants</h1>
    </div>
    <div class='col-3'>
      <%= link_to "Add a plant", new_plante_path, class: 'btn btn-primary m-2' %>
    </div>
  </div>

    <div class="row justify-content-center">
    <div class="col-sm-8 my-3">
      <%= form_with url: plantes_path, method: :get, class: "d-flex" do %>
        <%= text_field_tag :query,
              params[:query],
              class: "form-control",
              placeholder: "Look for plant"
          %>
        <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>

  <%# Plant card %>
  <div class="row row-cols-1 row-cols-md-4 g-4">

    <% if @plantes.any? %>
    <% @plantes.each do |plante| %>
      <div class="col">
        <div class="card" style="width: 18rem;">
          <div>
            <% if plante.image.attached?%>
            <a href="<%= plante_path(plante) %>">
              <%= cl_image_tag plante.image.key, height: 300, width: 300, crop: :fill %>
              </a>
            <% else %>
              <%= image_tag "No_images_available.webp", alt: plante.name, width: "100%", height: "300px" %>
            <% end %>
          </div>
          <div class="card-body">
            <h5 class="card-title"><%= plante.name %></h5>
            <p class="card-text"><%= plante.variety %></p>
            <p class="card-text"><%= plante.price %>$</p>
            <% if plante.user == current_user %>
            <% else %>
              <%= link_to "Make a request", plante_requests_path(plante), data: { turbo_method: :post }, class: 'btn btn-primary' %>
            <% end %>

          </div>
        </div>
      <% end %>
    <% else %>
      <em>Sorry, no plants found for <%= params[:query] %>.</em>
    <% end %>
  </div>

</div>
